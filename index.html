<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Potluck and Games ğŸ„</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="gradient-bg">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>
    <div class="container">
        <header>
            <h1>ğŸ„ Christmas Potluck and Games ğŸ„</h1>
            <p>By Javan & Khrystyna</p>
        </header>
        <main>
            <section id="event-details">
                <h2>ğŸ“… Event Details</h2>
                <div class="details-grid">
                    <p><strong>ğŸ—“ Date:</strong> Saturday, Dec 13 @ 7:00pm</p>
                    <p><strong>ğŸ“ Location:</strong> <a href="https://maps.app.goo.gl/7erDfpTLrVdHgYbV9" target="_blank">57 Wagon Trailway, Toronto</a></p>
                    <!-- <p><strong>ğŸ  Hosts:</strong> Javan & Khrystyna</p> -->
                </div>
                
                <!-- <h3>ğŸ‘ Good to Know</h3> -->
                <ul class="info-list">
                    <li><strong>Dress:</strong> Festively!</li>
                    <li><strong>Food & Drink:</strong> Potluck & BYOB</li>
                    <li><strong>Parking:</strong> Plenty of visitors parking around the complex</li>
                    <li><strong>Stay:</strong> You can crash overnight if needed (sleeping pads available)</li>
                </ul>
            </section>

            <section id="potluck">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; margin-bottom: 30px;">
                    <h2 style="margin: 0;">ğŸ¥˜ Potluck List</h2>
                    <button id="open-modal-btn" class="btn" style="padding: 12px 24px; font-size: 1rem;">â• Add your dish</button>
                </div>
                
                <div id="potluck-list" class="potluck-list-container">
                    <div class="loading-message">Loading tasty dishes...</div>
                </div>
            </section>

            <section id="guest-list">
                <h2>ğŸ“ Current Guest List</h2>
                
                <div class="details-grid">
                    <p><strong>Confirmed</strong>
                        <br>Viktor
                        <br>Devorah
                        <br>Xuey
                        <br>Kevin Tan
                        <br>James
                        <br>Kevin F
                        <br>Abe Train
                        <br>Rob Carman
                        <br>Peter
                        <br>Javan
                        <br>Khrystyna
                    </p>
                    <p><strong>Maybe</strong>
                        <br>Anqi
                        <br>Freddie
                        <br>Pat
                        <br>Sepehr
                    </p>
                </div>
            </section>

            <section id="games">
                <h2>ğŸ² Games & Activities</h2>
                <p style="color: var(--text-lighter); font-size: 1.05rem; margin-bottom: 25px;">
                    We'll have 2 "Main Teams" (Red vs. Green) for the overall score, but individual games will mix up the format!
                </p>

                <div class="game-list">
                    <!-- Game 1 -->
                    <details class="game-item">
                        <summary>âœ¨ Rapid-Fire This or That</summary>
                        <div class="game-details">
                            <strong>Format: 2 Main Teams</strong>
                            <p>Predict the group's holiday preferences! Teams try to guess the majority answer before the group reveals.</p>
                            <p><em>Examples: "Chestnuts or Candy Canes?", "Elf or Home Alone?"</em></p>
                            <strong>Supplies / Prep Needed:</strong>
                            Prepared list of binary holiday questions.
                        </div>
                    </details>

                    <!-- Game 2 -->
                    <details class="game-item">
                        <summary>ğŸˆ Balloon Waddle</summary>
                        <div class="game-details">
                            <strong>Format: Pairs (2 ppl)</strong>
                            <p>Pairs must waddle back-to-back with a balloon between them to the finish line without dropping it. If you drop it, you restart!</p>
                            <strong>Supplies / Prep Needed:</strong>
                            Balloons (plenty for everyone).
                        </div>
                    </details>

                    <!-- Game 3 -->
                    <details class="game-item">
                        <summary>ğŸ˜ Straight Face</summary>
                        <div class="game-details">
                            <strong>Format: Individual Free-for-All</strong>
                            <p>Everyone writes an outrageous phrase on a slip of paper. One person draws and reads it aloud. The goal is to keep a straight face. Whoever laughs or smiles loses!</p>
                            <strong>Supplies / Prep Needed:</strong>
                            Paper pad, pens for everyone, a hat or bowl.
                        </div>
                    </details>

                    <!-- Game 4 -->
                    <details class="game-item">
                        <summary>ğŸ„ Real or Fake Christmas Fact?</summary>
                        <div class="game-details">
                            <strong>Format: 2 Main Teams</strong>
                            <p>Host reads bizarre holiday statements (e.g., "In Norway, people hide their brooms on Christmas Eve."). Teams vote: Real or Fake.</p>
                            <strong>Supplies / Prep Needed:</strong>
                            List of true/false Christmas trivia facts.
                        </div>
                    </details>

                    <!-- Game 5 -->
                    <details class="game-item">
                        <summary>ğŸ§© Emoji Decoders</summary>
                        <div class="game-details">
                            <strong>Format: Small Squads (3-4 ppl)</strong>
                            <p>Break into small squads. Show a string of emojis representing a movie/song. First squad to solve it gets the point.</p>
                            <strong>Supplies / Prep Needed:</strong>
                            Slides or images of emoji puzzles prepared on a phone/TV.
                        </div>
                    </details>

                    <!-- Game 6 -->
                    <details class="game-item">
                        <summary>ğŸ­ Holiday Charades</summary>
                        <div class="game-details">
                            <strong>Format: 2 Main Teams</strong>
                            <p>Classic charades with festive prompts! Teams take turns sending an actor to mime a holiday phrase (e.g., "Stuffing the Turkey", "Silent Night") within 60 seconds.</p>
                            <strong>Supplies / Prep Needed:</strong>
                            Slips of paper with holiday prompts, timer, bowl/hat.
                        </div>
                    </details>
                </div>

                <div class="scoring-section">
                    <h3>ğŸ† Scoring System</h3>
                    <p style="margin-top: 0; color: var(--text-lighter); font-size: 0.95rem;">
                        Everything feeds into the <strong>Main Team (Red vs Green)</strong> score!
                    </p>
                    <ul style="margin: 0;">
                        <li><strong>Main Team Win:</strong> 5 Points (e.g. Charades)</li>
                        <li><strong>Small Squad Win:</strong> 3 Points for your Main Team</li>
                        <li><strong>Pair/Individual Win:</strong> 2 Points for your Main Team</li>
                        <li><strong>Bonus:</strong> 1 Point for creativity/laughs</li>
                    </ul>
                </div>

                <div class="shopping-list">
                    <h3>ğŸ›’ Shopping & Prep List</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <h4 style="color: var(--text-light); margin-top: 0;">To Buy / Find:</h4>
                            <ul style="font-size: 0.95rem;">
                                <li>ğŸˆ Balloons (Pack of 30+)</li>
                                <li>ğŸ–Šï¸ Pens/Pencils (10+)</li>
                                <li>ğŸ“ Notepad or Paper</li>
                                <li>ğŸ¥£ 2x Hats or Bowls</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: var(--text-light); margin-top: 0;">To Prep (Host):</h4>
                            <ul style="font-size: 0.95rem;">
                                <li>[ ] "This or That" Questions</li>
                                <li>[ ] "Real or Fake" Facts List</li>
                                <li>[ ] Emoji Puzzles (Phone/TV)</li>
                                <li>[ ] Charades Prompts (Cutouts)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <!-- Modal -->
    <div id="potluck-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 style="margin-top: 0; text-align: center;">ğŸ² Bring a Dish</h2>
            <form id="potluck-form">
                <div class="form-group">
                    <label for="guest-name">Your Name</label>
                    <input type="text" id="guest-name" name="name" required placeholder="e.g. Santa Claus">
                </div>
                <div class="form-group">
                    <label for="dish-name">What are you bringing?</label>
                    <input type="text" id="dish-name" name="dish" required placeholder="e.g. Grandma's Cookies">
                </div>
                <button type="submit" class="btn" style="width: 100%; margin-top: 10px;">Submit Dish</button>
            </form>
        </div>
    </div>

    <script>
        // Modal Logic
        const modal = document.getElementById("potluck-modal");
        const btn = document.getElementById("open-modal-btn");
        const span = document.getElementsByClassName("close-modal")[0];
        const form = document.getElementById("potluck-form");

        const scriptURL = 'https://script.google.com/macros/s/AKfycbysVdjS_g0Zlax7mxovFEQCuHsxTP77AIAURRhhmf4fgs3S0j0qiYlbd_5yghQulxRT/exec';

        // Function to fetch and display the potluck list
        function fetchPotluckList() {
            const container = document.getElementById('potluck-list');
            
            fetch(scriptURL)
                .then(response => response.json())
                .then(data => {
                    // Expecting data to be an array of objects
                    if (data && data.length > 0) {
                        let tableHTML = '<table class="potluck-table"><thead><tr><th>Guest Name</th><th>Bringing...</th></tr></thead><tbody>';
                        
                        data.forEach(row => {
                            // Only show rows that have a name and dish
                            if(row.name && row.dish) {
                                tableHTML += `<tr>
                                    <td>${row.name}</td>
                                    <td>${row.dish}</td>
                                </tr>`;
                            }
                        });
                        
                        tableHTML += '</tbody></table>';
                        container.innerHTML = tableHTML;
                    } else {
                        container.innerHTML = '<div class="loading-message">No dishes added yet! Be the first!</div>';
                    }
                })
                .catch(error => {
                    console.error('Error fetching list:', error);
                    container.innerHTML = '<div class="error-message">Could not load the list. Refresh to try again.</div>';
                });
        }

        // Load list on page load
        document.addEventListener('DOMContentLoaded', fetchPotluckList);

        if (btn) {
            btn.onclick = function() {
                modal.style.display = "block";
            }
        }

        if (span) {
            span.onclick = function() {
                modal.style.display = "none";
            }
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        if (form) {
            form.onsubmit = function(e) {
                e.preventDefault();
                
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalBtnText = submitBtn.innerText;
                submitBtn.innerText = "Sending...";
                submitBtn.disabled = true;

                const formData = new FormData(form);

                fetch(scriptURL, { method: 'POST', body: formData })
                    .then(response => {
                        const name = document.getElementById("guest-name").value;
                        const dish = document.getElementById("dish-name").value;
                        
                        alert(`Thanks ${name}! We've added ${dish} to the list.`);
                        
                        form.reset();
                        modal.style.display = "none";
                        
                        // Reload the list to show the new entry
                        const container = document.getElementById('potluck-list');
                        container.innerHTML = '<div class="loading-message">Updating list...</div>';
                        fetchPotluckList();
                    })
                    .catch(error => {
                        console.error('Error!', error.message);
                        alert('Oops! Something went wrong. Please try again.');
                    })
                    .finally(() => {
                        submitBtn.innerText = originalBtnText;
                        submitBtn.disabled = false;
                    });
            }
        }
    </script>
</body>
</html>
